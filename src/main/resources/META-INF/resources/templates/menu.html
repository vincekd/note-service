<div ng-controller="TopBarCtrl" class="top-bar">
    <div class="container-fluid row-full-height">
        <div class="row no-row-center-padding">

            <div class="col-sm-1">
                <div class="btn-group" uib-dropdown="" uib-keyboard-nav="" 
                    on-toggle="filterOpened()" dropdown-append-to-body="" is-open="opts.isOpen">
                    <button type="button" class="btn" uib-dropdown-toggle="">
                        <span>Filters</span>
                        <span class="caret"></span>
                    </button>
                    <ul class="uib-dropdown-menu" role="menu" aria-labelledby="single-button">
                        <li><color-choices on-change="filterColor(color)"></color-choices></li>
                        <li class="divider"></li>
                        <li ng-repeat="tag in tags | TagsUsed:current.filters.tags">
                            <a ng-click="filterTag(tag)" ng-bind="tag.name"></a>
                        </li>
                        <li class="divider"></li>
                        <li><a ng-click="resetFilters()">Clear filters</a></li>
                  </ul>
                </div>
                <button class="btn" ng-click="resetFilters()"
                    ng-if="(!(current.filters.colors | Empty) || !(current.filters.tags | Empty) || !(current.filters.search | Empty))"
                    uib-tooltip="Clear filters" tooltip-placement="right" tooltip-append-to-body="true">
                    <span class="close">&times;</span>
                </button>
            </div>

            <div class="col-sm-2">
                <input type="text" placeholder="Search" class="stklt-input" ng-model="current.filters.search" maxlength="100" />
            </div>
            
            <div class="col-sm-6">
                <div class="current-filters">
                    <span class="tag-label" ng-repeat="color in current.filters.colors" ng-style="{'background': color}">
                        <span class="name" ng-bind="color"></span>
                        <a class="pull-right close" ng-click="removeColorFilter(color)">&times;</a>
                    </span>
                    <span class="tag-label" ng-repeat="tag in current.filters.tags">
                        <span ng-bind="tag.name" class="name"></span>
                        <a class="pull-right close" ng-click="removeTagFilter(tag)">&times;</a>
                    </span>
                </div>
            </div>

            <div class="col-sm-3">
                <div class="pull-right">
                    <button class="btn" type="button" ng-click="startBatchSelect()" ng-if="!opts.batchSelect" id="batch-edit-btn">
                        <span>Batch Actions</span>
                    </button>
                    <div class="btn-group" uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body="">
                        <button type="button" class="btn" uib-dropdown-toggle="">
                            <span>Settings</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="uib-dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="single-button">
                            <li><a ng-href="#!/tags">Tag Manager</a></li>
                            <li><a ng-href="#!/data">Data Manager</a></li>
                            <li><a ng-href="#!/archive">Archive</a></li>
                            <li><a ng-href="#!/trash" ng-if="opts.trashEnabled">Trash</a></li>
                            <li><a ng-href="#!/settings">Settings</a></li>
                            <li class="divider"></li>
                            <li><a ng-click="logout()">Logout</a></li>
                      </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
